(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"75c8":function(t,e,i){"use strict";i("9b8f")},"9b8f":function(t,e,i){},c3d1:function(t,e,i){"use strict";i.r(e);i("b0c0");var s=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"q-pb-lg"},[e("q-header",{staticClass:"no-print box-shadow",class:t.getHeaderColorBrand},[e("q-toolbar",[e("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"eva-arrow-back"},on:{click:t.goBack}}),e("q-toolbar-title",{staticClass:"text-weight-bold brand"},[t.invoice?e("span",[t._v("Pesanan")]):t._e()])],1)],1),t.invoice?e("div",{staticClass:"no-print"},[e("div",{staticClass:"q-gutter-y-md"},[e("div",{staticClass:"q-pb-lg bg-white q-py-md q-px-sm"},[e("q-list",{attrs:{dense:""}},[e("q-item",[e("q-item-section",{attrs:{top:""}},[e("q-item-label",[t._v("Nomor Invoice")])],1),e("q-item-section",[e("q-item-label",[t._v("\n                        "+t._s(t.invoice.order_ref)+"\n                        "),e("q-icon",{staticClass:"q-ml-xs cursor-pointer",attrs:{name:"eva-copy",size:"18px"},on:{click:function(e){return t.copy(t.invoice.order_ref)}}})],1)],1)],1),e("q-item",[e("q-item-section",[t._v("Tanggal Pembelian")]),e("q-item-section",[t._v(t._s(t.invoice.created))])],1),e("q-item",[e("q-item-section",[t._v("Status Pesanan")]),e("q-item-section",[e("q-item-label",[e("span",{staticClass:"q-px-md rounded-borders text-white q-py-xs",class:"bg-".concat(t.getOrderStatusColor(t.invoice.order_status))},[t._v(t._s(t.invoice.customer_status_label))])])],1)],1)],1)],1),e("q-card",{staticClass:"no-print bg-white shadow",attrs:{square:""}},[e("div",{staticClass:"card-heading"},[t._v("Produk item")]),e("q-card-section",[e("q-separator",{attrs:{color:"teal q-pt-xs"}}),e("q-list",{attrs:{separator:""}},[e("q-item",{staticClass:"bg-green-1"},[e("q-item-section",[t._v("Produk")]),e("q-item-section",[t._v("Qty")]),e("q-item-section",{attrs:{side:""}},[t._v("Harga")])],1),t._l(t.invoice.items,(function(i,s){return e("q-item",{key:s},[e("q-item-section",[e("div",[t._v(t._s(i.name))]),i.note?e("div",{staticClass:"text-caption tet-grey-6"},[t._v(t._s(i.note))]):t._e()]),e("q-item-section",[t._v(t._s(i.quantity))]),e("q-item-section",{attrs:{side:""}},[t._v(t._s(t.moneyIDR(i.price)))])],1)}))],2)],1)],1),e("q-card",{staticClass:"no-print bg-white shadow",attrs:{square:""}},[e("div",{staticClass:"card-heading"},[e("div",[t._v("Pesan dari Pembeli")])]),e("q-card-section",[t._v("\n               "+t._s(t.invoice.note?t.invoice.note:"")+"\n            ")])],1),e("q-card",{staticClass:"no-print bg-white shadow",attrs:{square:""}},[e("div",{staticClass:"card-heading"},[e("div",[t._v("Detail Pembeli")])]),e("q-card-section",{staticClass:"q-px-sm"},[e("q-list",{attrs:{dense:""}},[e("q-item",[e("q-item-section",[t._v("Nama")]),e("q-item-section",[t._v(t._s(t.invoice.customer_name))])],1),e("q-item",[e("q-item-section",[t._v("Ponsel")]),e("q-item-section",[t._v(t._s(t.invoice.customer_phone))])],1),t.invoice.shipping_address?e("q-item",[e("q-item-section",{attrs:{top:""}},[t._v("Alamat")]),e("q-item-section",[e("div",{domProps:{innerHTML:t._s(t.invoice.shipping_address)}})])],1):t._e(),t.invoice.shipping_courier_name?e("q-item",[e("q-item-section",[t._v("Kurir")]),e("q-item-section",[t._v("\n                        "+t._s(t.invoice.shipping_courier_name)+"\n                        "+t._s(t.invoice.shipping_courier_service?" ".concat(t.invoice.shipping_courier_service):"")+"\n                     ")])],1):t._e()],1)],1)],1),e("q-card",{staticClass:"no-print bg-white shadow",attrs:{square:""}},[e("div",{staticClass:"card-heading border-b"},[t._v("Rincian Pembayaran")]),e("q-card-section",{staticClass:"q-px-sm"},[e("q-list",{attrs:{dense:""}},[e("q-item",[e("q-item-section",[t._v("Subtotal Produk")]),e("q-item-section",[t._v(t._s(t.moneyIDR(t.invoice.order_subtotal)))])],1),t.invoice.shipping_cost?e("q-item",[e("q-item-section",[t._v("Total Ongkos Kirim ("+t._s(t.invoice.order_weight)+" gram)")]),e("q-item-section",[t._v(t._s(t.moneyIDR(t.invoice.shipping_cost)))])],1):t._e(),t.invoice.order_unique_code?e("q-item",[e("q-item-section",[t._v("Kode Unik")]),e("q-item-section",[t._v(t._s(t.invoice.order_unique_code))])],1):t._e(),e("q-item",[e("q-item-section",[e("q-item-label",{staticClass:"text-weight-bold q-py-sm text-md"},[t._v("Total bayar")])],1),e("q-item-section",[e("q-item-label",{staticClass:"text-weight-bold q-py-sm text-md"},[t._v(t._s(t.moneyIDR(t.invoice.grand_total)))])],1)],1)],1)],1)],1)],1),"PENDING"==t.invoice.order_status?e("q-footer",{staticClass:"bg-white q-pa-md"},[e("div",{staticClass:"text-center text-grey-7 column q-gutter-y-sm"},[e("q-btn",{ref:"chatAdmin",attrs:{label:"Chat admin",name:"eva-message-circle","no-caps":"",color:"blue-7"},on:{click:t.chatToAdmin}})],1)]):t._e()],1):t._e(),e("q-inner-loading",{staticClass:"no-print",attrs:{showing:t.stateLoading}}),e("q-dialog",{attrs:{persistent:"","no-shake":""},model:{value:t.messageModal,callback:function(e){t.messageModal=e},expression:"messageModal"}},[e("q-card",{staticClass:"card-lg"},[e("q-card-section",[e("div",{staticClass:"row justify-between q-mb-sm"},[e("div",{staticClass:"text-md2"},[t._v("Chat Admin")]),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{round:"",icon:"close",flat:"",dense:""}})],1),e("form",{on:{submit:function(e){return e.preventDefault(),t.submitChat.apply(null,arguments)}}},[e("q-input",{ref:"inputMessage",attrs:{required:"",type:"textarea",label:"Isi Pesan",outlined:"",rows:"10"},model:{value:t.formMessage.message,callback:function(e){t.$set(t.formMessage,"message",e)},expression:"formMessage.message"}}),e("div",{staticClass:"q-mt-md"},[e("q-btn",{staticClass:"full-width",attrs:{type:"submit",label:"Kirim Whatsapp",color:"green","no-caps":""}})],1)],1)])],1)],1)],1)},a=[],o=i("ded3"),n=i.n(o),r=(i("99af"),i("ac1f"),i("5319"),i("2ca0"),i("cdde")),c=i("2f62"),m=i("d055"),d=i.n(m),u={name:"InvoiceIndex",data:function(){return{messageModal:!1,modalPayment:!1,throtle:1,interval:null,timeout:null,requestCount:1,whatsappUrl:"https://api.whatsapp.com",qrData:"",autoShowModal:!1,formMessage:{message:""}}},computed:{invoice:function(){return this.$store.state.order.invoice},title:function(){return this.invoice?"Tagihan ".concat(this.invoice.order_ref):"Tagihan"}},created:function(){this.invoice?this.invoice.order_ref!=this.$route.params.order_ref?this.getData():(this.ready=!0,this.checkOrderStatus()):this.getData()},mounted:function(){this.$q.platform.is.desktop&&(this.whatsappUrl="https://web.whatsapp.com")},methods:n()(n()({},Object(c["b"])("order",["getInvoice"])),{},{generateQr:function(){var t=this,e={errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:1};d.a.toDataURL(this.getRoutePath(),e,(function(e,i){if(e)throw e;t.qrData=i}))},getRoutePath:function(){var t=this.$router.resolve({name:"UserInvoice",params:{order_ref:this.invoice.order_ref}});return location.origin+t.href},getData:function(){var t=this;this.$store.commit("SET_LOADING",!0),this.$route.params.order_ref?this.getInvoice(this.$route.params.order_ref).then((function(e){200==e.status&&t.$store.commit("order/SET_INVOICE",e.data.results),t.$store.commit("SET_LOADING",!1),t.checkOrderStatus(),setTimeout((function(){t.generateQr()}),1e3)})).catch((function(){t.$router.push({name:"Cart"})})):this.$router.push({name:"Cart"})},goBack:function(){this.$route.query._rdr?this.$router.push(this.$route.query._rdr):this.$router.push("/")},setDefaultMessage:function(){this.formMessage.message="Ref Order:\nInvoice: ".concat(this.invoice.order_ref,"\nLink: ").concat(location.href,"\n\nHalo Kak\n")},chatToAdmin:function(){var t=this;this.setDefaultMessage(),this.messageModal=!0,setTimeout((function(){t.$refs.inputMessage.focus()}),1e3)},submitChat:function(){var t=this;if(this.currentShop.phone){var e="".concat(this.whatsappUrl,"/send?phone=").concat(this.formatPhoneNumber(this.currentShop.phone),"&text=").concat(encodeURI(this.formMessage.message));setTimeout((function(){t.messageModal=!1}),3e3),window.open(e,"_blank")}},formatPhoneNumber:function(t){var e=t.replace(/\D/g,"");return e.startsWith("0")&&(e="62"+e.substr(1)),e},copy:function(t){var e=this;Object(r["a"])(t).then((function(){e.$q.notify({type:"positive",message:"Berhasil menyalin data"})})).catch((function(){e.$q.notify({type:"negative",message:"Browser anda tidak support copy to clipboard"})}))},getCheckOrder:function(){var t=this;this.getInvoice(this.$route.params.order_ref).then((function(e){200==e.status&&(t.$store.commit("order/SET_INVOICE",e.data.results),t.checkOrderStatus())}))},checkOrderStatus:function(){var t=this;this.requestCount<10&&"PENDING"==this.invoice.order_status?(this.requestCount++,this.timeout=setTimeout((function(){t.getCheckOrder()}),25e3)):clearTimeout(this.timeout)}}),beforeDestroy:function(){clearTimeout(this.timeout)},meta:function(){return{title:this.title,meta:{ogTitle:{property:"og:title",content:this.title}}}}},l=u,h=(i("75c8"),i("2877")),p=i("9989"),v=i("e359"),q=i("65c6"),_=i("9c40"),g=i("6ac5"),f=i("1c1c"),b=i("66e5"),C=i("4074"),w=i("0170"),y=i("0016"),k=i("f09f"),I=i("a370"),x=i("eb85"),P=i("7ff0"),T=i("74f7"),D=i("24e8"),$=i("27f9"),Q=i("7f67"),M=i("eebe"),S=i.n(M),O=Object(h["a"])(l,s,a,!1,null,null,null);e["default"]=O.exports;S()(O,"components",{QPage:p["a"],QHeader:v["a"],QToolbar:q["a"],QBtn:_["a"],QToolbarTitle:g["a"],QList:f["a"],QItem:b["a"],QItemSection:C["a"],QItemLabel:w["a"],QIcon:y["a"],QCard:k["a"],QCardSection:I["a"],QSeparator:x["a"],QFooter:P["a"],QInnerLoading:T["a"],QDialog:D["a"],QInput:$["a"]}),S()(O,"directives",{ClosePopup:Q["a"]})}}]);