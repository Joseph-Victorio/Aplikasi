(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{"2c31":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("q-layout",{staticClass:"bg-white",attrs:{view:"hHh lpR fFf"}},[e("q-page-container",[e("q-page",{staticClass:"bg-grey-1"},[e("q-header",{staticClass:"q-px-sm"},[e("q-toolbar",[e("q-toolbar-title",{staticClass:"text-weight-bold brand"},[e("span",[t._v("Nextshop Installer")])])],1)],1),t.can_install?e("div",[e("q-stepper",{attrs:{color:"primary",animated:"",flat:"",vertical:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[e("q-step",{attrs:{name:1,title:"Welcome",icon:"home",done:t.step>1}},[e("div",{staticClass:"q-py-sm"},[e("div",{staticClass:"block-title q-mb-md"},[e("h2",[t._v("Installasi Nextshop App")])]),e("p",[t._v("\n                        Sebelum melanjutkan installasi, silahkan membuat "),e("b",[t._v("database")]),t._v(" dan "),e("b",[t._v("database user")]),t._v("\n                        terlebih dahulu di server atau panel hosting anda\n                     ")]),e("q-stepper-navigation",[e("q-btn",{attrs:{color:t.is_done?"primary":"grey-6",disable:!t.is_done,label:"Continue"},on:{click:t.nextStep}})],1)],1)]),e("q-step",{attrs:{name:2,title:"Server Requirements",icon:"settings",done:t.step>2}},[e("Requirements",{on:{onDone:t.stepDone}}),e("q-stepper-navigation",[e("q-btn",{attrs:{color:t.is_done?"primary":"grey-6",disable:!t.is_done,label:"Continue"},on:{click:t.nextStep}}),e("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Back"},on:{click:t.prevStep}})],1)],1),e("q-step",{attrs:{name:3,title:"Setup Database",icon:"source",done:t.step>3}},[e("Database",{on:{onDone:t.stepDone}}),e("q-stepper-navigation",[e("q-btn",{attrs:{color:t.is_done?"primary":"grey-6",disable:!t.is_done,label:"Continue"},on:{click:t.nextStep}}),e("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Back"},on:{click:t.prevStep}})],1)],1),e("q-step",{attrs:{name:4,title:"Configure & Install App",icon:"input",done:t.step>4}},[e("InstallApp",{on:{onDone:t.complete}}),e("q-stepper-navigation",[e("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Back"},on:{click:t.prevStep}})],1)],1),e("q-step",{attrs:{name:5,title:"Done",icon:"check"}},[e("div",{staticClass:"q-py-sm"},[e("div",{staticClass:"block-title q-mb-md"},[e("h2",[t._v("Installasi Selesai")])]),e("p",[t._v("\n                        Selamat, Installasi aplikasi berhasil"),e("br"),t._v("Berikut kredensial anda:\n                     ")]),e("div",{staticClass:"q-pa-md bg-green-1"},[e("div",[t._v("Admin Email: "),e("b",[t._v(t._s(this.admin_email))])]),e("div",[t._v("Admin Password: "),e("b",[t._v(t._s(this.admin_password))])])]),e("q-stepper-navigation",[e("q-btn",{attrs:{to:{name:"Login"},color:"primary",label:"Login"}}),e("q-btn",{staticClass:"q-ml-sm",attrs:{outline:"",to:"/",color:"primary",label:"Beranda"}})],1)],1)])],1)],1):t._e()],1)],1)],1)},n=[],i=(a("d3b7"),a("e6cf"),a("a79d"),a("ac1f"),a("5319"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-py-sm"},[t._m(0),e("ul",t._l(t.requirements,(function(a,s){return e("li",{key:s},[t._v(t._s(a))])})),0),e("div",{staticClass:"q-pa-md bg-green-1"},[t._v("\n      Selamat Server anda sudah siap!\n   ")])])}),l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"block-title q-mb-md"},[e("h2",[t._v("Server Requirements")])])}],o=a("758b"),r={data:function(){return{requirements:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;Object(o["a"])().get("installer/server").then((function(e){t.requirements=e.data.results,t.requirements.length||t.$emit("onDone")}))}}},c=r,m=a("2877"),d=Object(m["a"])(c,i,l,!1,null,null,null),p=d.exports,u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-py-sm"},[t._m(0),e("q-form",{on:{submit:t.checkDatabase}},[t._l(t.fields,(function(a,s,n){return e("q-input",{key:n,attrs:{required:"","stack-label":"",label:"DB_".concat(s.toUpperCase())},model:{value:t.fields[s],callback:function(e){t.$set(t.fields,s,e)},expression:"fields[key]"}})})),e("div",{staticClass:"card-action q-pt-lg"},[e("q-btn",{staticClass:"full-width",attrs:{loading:t.loading,type:"submit",color:"teal"}},[t._v("Submit Data")])],1)],2)],1)},f=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"block-title q-mb-md"},[e("h2",[t._v("Setup Database")])])}],b={data:function(){return{fields:[],loading:!1}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;Object(o["a"])().get("installer/database").then((function(e){t.fields=e.data.results}))},checkDatabase:function(){var t=this;this.loading=!0,Object(o["a"])().post("installer/database",this.fields).then((function(e){var a=e.data.results;a.success&&(t.$emit("onDone",!0),t.$q.notify({type:"positive",message:a.message})),a.success||t.$q.notify({type:"negative",message:a.message,timeout:6e3})})).finally((function(){t.loading=!1}))}}},h=b,_=a("0378"),v=a("27f9"),q=a("9c40"),g=a("eebe"),k=a.n(g),C=Object(m["a"])(h,u,f,!1,null,null,null),y=C.exports;k()(C,"components",{QForm:_["a"],QInput:v["a"],QBtn:q["a"]});var w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-py-sm"},[t._m(0),e("form",{on:{submit:function(e){return e.preventDefault(),t.installNow.apply(null,arguments)}}},[e("div",[e("q-card",{staticClass:"section",attrs:{flat:"",bordered:""}},[e("q-card-section",{staticClass:"q-gutter-y-sm"},[e("div",{staticClass:"text-md"},[t._v("Shop Detail")]),e("q-input",{attrs:{required:"",filled:"","stack-label":"",label:"Shop Name"},model:{value:t.form.shop_name,callback:function(e){t.$set(t.form,"shop_name",e)},expression:"form.shop_name"}}),e("q-input",{attrs:{required:"",filled:"","stack-label":"",label:"Shop Phone"},model:{value:t.form.shop_phone,callback:function(e){t.$set(t.form,"shop_phone",e)},expression:"form.shop_phone"}})],1)],1),e("q-card",{staticClass:"section q-mt-md",attrs:{flat:"",bordered:""}},[e("q-card-section",{staticClass:"q-gutter-y-sm"},[e("div",{staticClass:"text-md"},[t._v("Admin Detail")]),e("q-input",{attrs:{required:"",filled:"","stack-label":"",label:"Admin Name"},model:{value:t.form.admin_name,callback:function(e){t.$set(t.form,"admin_name",e)},expression:"form.admin_name"}}),e("q-input",{attrs:{required:"",filled:"","stack-label":"",label:"Admin Email"},model:{value:t.form.admin_email,callback:function(e){t.$set(t.form,"admin_email",e)},expression:"form.admin_email"}}),e("q-input",{attrs:{required:"",filled:"","stack-label":"",label:"Admin Password"},model:{value:t.form.admin_password,callback:function(e){t.$set(t.form,"admin_password",e)},expression:"form.admin_password"}})],1)],1),e("div",{staticClass:"q-py-md"},[e("q-checkbox",{attrs:{label:"Install Demo Konten"},model:{value:t.form.with_demo,callback:function(e){t.$set(t.form,"with_demo",e)},expression:"form.with_demo"}})],1),e("q-btn",{staticClass:"full-width",attrs:{loading:t.loading,type:"submit",color:"teal"}},[t._v("Install Sekarang")])],1)])])},S=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"block-title q-mb-md"},[e("h2",[t._v("Configure & Install App")])])}],D={data:function(){return{loading:!1,form:{shop_name:"",shop_phone:"",admin_name:"",admin_email:"",admin_password:"",with_demo:!1}}},methods:{handleInstall:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.form.with_demo=t,console.log(this.$refs.form),this.$refs.form.submit()},installNow:function(){var t=this;this.loading=!0,Object(o["a"])().post("installer/install",this.form).then((function(e){var a=e.data.results;a.success&&(t.$emit("onDone",{email:t.form.admin_email,password:t.form.admin_password}),t.$q.notify({type:"positive",message:a.message})),a.success||t.$q.notify({type:"negative",message:a.message,timeout:6e3})})).finally((function(){t.loading=!1}))}}},x=D,$=a("f09f"),Q=a("a370"),I=a("8f8e"),A=Object(m["a"])(x,w,S,!1,null,null,null),j=A.exports;k()(A,"components",{QCard:$["a"],QCardSection:Q["a"],QInput:v["a"],QCheckbox:I["a"],QBtn:q["a"]});var B={components:{Requirements:p,Database:y,InstallApp:j},data:function(){return{step:1,is_done:!0,admin_email:"",admin_password:""}},computed:{can_install:function(){return this.$store.state.can_install}},created:function(){this.checkStatusInstalled()},methods:{nextStep:function(){this.step++,this.is_done=!1},prevStep:function(){this.step--,this.is_done=!0},stepDone:function(){this.is_done=!0},complete:function(t){this.step++,this.admin_email=t.email,this.admin_password=t.password},checkStatusInstalled:function(){var t=this;this.$q.loading.show(),Object(o["a"])().get("installer/status").then((function(e){e.data.installed?t.$router.replace("/"):t.$store.commit("CAN_INSTALL",!0)})).finally((function(){t.$q.loading.hide()}))}}},N=B,O=a("4d5a"),L=a("09e3"),P=a("9989"),R=a("e359"),T=a("65c6"),E=a("6ac5"),F=a("f531"),H=a("87fe"),J=a("b19c"),K=Object(m["a"])(N,s,n,!1,null,null,null);e["default"]=K.exports;k()(K,"components",{QLayout:O["a"],QPageContainer:L["a"],QPage:P["a"],QHeader:R["a"],QToolbar:T["a"],QToolbarTitle:E["a"],QStepper:F["a"],QStep:H["a"],QStepperNavigation:J["a"],QBtn:q["a"]})}}]);