(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[48],{"826c":function(a,e,t){"use strict";t.r(e);t("a4d3"),t("e01a");var i=function(){var a=this,e=a._self._c;return e("q-page",{staticClass:"q-pb-xl"},[e("q-header",[e("q-toolbar",[e("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],attrs:{flat:"",round:"",dense:"",icon:"eva-arrow-back"}}),e("q-toolbar-title",[a._v("\n       Tambah Produk\n      ")])],1)],1),e("div",{staticClass:"q-px-md q-py-md"},[e("div",{},[e("div",{staticClass:"text-weight-medium text-md q-mb-sm text-grey-7"},[a._v("Gambar Produk")]),e("div",{staticClass:"row q-gutter-md"},[e("div",{staticClass:"box-image bordered cursor-pointer flex justify-center items-center",on:{click:a.selectNewImage}},[e("q-icon",{attrs:{name:"add_a_photo",size:"lg",color:"grey"}})],1),a._l(a.imagePreview,(function(t,i){return e("div",{key:i,staticClass:"box-image relative cursor-pointer",class:{"feature-image-selected":a.form.featured_index==i}},[e("img",{staticClass:"bg-white",attrs:{src:t},on:{click:function(e){return a.changeFeaturedImage(i)}}}),e("div",{staticClass:"absolute-top-right"},[e("q-btn",{attrs:{dense:"",size:"10px",unelevated:"",icon:"close",color:"red",padding:"1px"},on:{click:function(e){return e.preventDefault(),a.removeImage(i)}}})],1)])}))],2),a.imagePreview.length?e("div",{staticClass:"text-xs q-pt-sm text-grey"},[a._v("Untuk memilih featured image klik pada gambar")]):a._e()])]),e("form",{staticClass:"q-pt-sm",on:{submit:function(e){return e.preventDefault(),a.submit.apply(null,arguments)}}},[e("div",{staticClass:"q-gutter-y-md q-px-md"},[e("q-input",{attrs:{outlined:"",type:"text",label:"Nama Produk",required:""},model:{value:a.form.title,callback:function(e){a.$set(a.form,"title",e)},expression:"form.title"}}),a.errors.title?e("div",{staticClass:"text-xs text-red"},[a._v(" "+a._s(a.errors.title[0]))]):a._e(),e("div",[e("div",{staticClass:"row items-center q-gutter-x-sm"},[e("div",{staticClass:"col"},[e("money-formatter",{attrs:{outlined:"",prefix:"Rp"},model:{value:a.form.price,callback:function(e){a.$set(a.form,"price",e)},expression:"form.price"}})],1),e("div",{staticClass:"col"},[e("money-formatter",{attrs:{outlined:"",label:"Stok"},model:{value:a.form.stock,callback:function(e){a.$set(a.form,"stock",e)},expression:"form.stock"}})],1),e("div",{staticClass:"col"},[e("money-formatter",{attrs:{outlined:"",label:"Berat",suffix:"GRAM"},model:{value:a.form.weight,callback:function(e){a.$set(a.form,"weight",e)},expression:"form.weight"}})],1)]),e("div",{staticClass:"text-xs text-grey-7 q-pa-xs"},[a._v("Input harga terendah jika menggunakan varian")])]),e("q-select",{staticClass:"q-pb-md",attrs:{outlined:"",options:a.categories,label:"Kategori","emit-value":"","map-options":""},model:{value:a.form.category_id,callback:function(e){a.$set(a.form,"category_id",e)},expression:"form.category_id"}}),e("div",{staticClass:"q-mt-md q-mb-sm"},[e("label",{staticClass:"text-grey-7 q-pb-sm block",attrs:{for:"description"}},[a._v("Deskripsi")]),e("q-editor",{model:{value:a.form.description,callback:function(e){a.$set(a.form,"description",e)},expression:"form.description"}}),a.errors.description?e("div",{staticClass:"text-xs text-red"},[a._v(" "+a._s(a.errors.description[0]))]):a._e()],1)],1),e("input",{ref:"image",staticClass:"hidden",attrs:{type:"file",multiple:""},on:{change:a.updateImagePreview}}),e("div",{staticStyle:{"min-height":"200px"},attrs:{id:"variants"}},[e("div",{staticClass:"row items-center justify-between q-mt-xl q-pa-md bg-green-1"},[e("div",{staticClass:"text-md2 text-weight-medium"},[a._v("Produk Variasi")]),a.canAddVarian?e("q-btn",{attrs:{label:"Tambah Variasi",color:"accent",size:"12px"},on:{click:function(e){a.varianModal=!0}}}):a._e()],1),a.form.varians.length?e("div",[a.form.varians[0].has_subvarian?e("div",a._l(a.form.varians,(function(t,i){return e("div",{key:i},[e("div",{staticClass:"row items-start justify-between bg-grey-2 q-pa-md q-pt-lg"},[e("div",{staticClass:"text-weight-bold text-md"},[a._v(a._s(a.form.varians[i].label)+" "+a._s(a.form.varians[i].value))]),e("div",{staticClass:"q-gutter-x-sm"},[e("q-btn",{attrs:{unelevated:"",size:"10px",color:"red"},on:{click:function(e){return a.deleteVarian(i)}}},[a._v("Hapus "+a._s(a.form.varians[i].value))]),e("q-btn",{attrs:{unelevated:"",size:"10px",color:"teal"},on:{click:function(e){return a.pushSubVarian(i)}}},[a._v("Tambah Item")])],1)]),e("div",{},[a.form.varians[i].subvarian.length?e("q-list",{staticClass:"bg-white q-pa-sm q-mt-xs"},a._l(a.form.varians[i].subvarian,(function(t,r){return e("q-item",{key:r,staticClass:"q-px-sm"},[e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{round:"",unelevated:"",padding:"2px",icon:"remove",size:"9px",color:"red"},on:{click:function(e){return a.deleteSubvarian(i,r)}}})],1),e("q-item-section",[e("q-item-label",{staticClass:"q-mb-xs"},[e("q-input",{attrs:{"stack-label":"",filled:"",square:"",required:"",dense:"",label:a.form.varians[i].subvarian[r].label},model:{value:a.form.varians[i].subvarian[r].value,callback:function(e){a.$set(a.form.varians[i].subvarian[r],"value",e)},expression:"form.varians[varIndex].subvarian[subIndex].value"}})],1),e("q-item-label",[e("money-formatter",{attrs:{"stack-label":"",dense:"",filled:"",required:"",label:"Berat"},model:{value:a.form.varians[i].subvarian[r].weight,callback:function(e){a.$set(a.form.varians[i].subvarian[r],"weight",e)},expression:"form.varians[varIndex].subvarian[subIndex].weight"}})],1)],1),e("q-item-section",[e("q-item-label",{staticClass:"q-mb-xs"},[e("money-formatter",{attrs:{"stack-label":"",dense:"",filled:"",required:"",prefix:"Rp",label:"Harga Jual"},model:{value:a.form.varians[i].subvarian[r].price,callback:function(e){a.$set(a.form.varians[i].subvarian[r],"price",e)},expression:"form.varians[varIndex].subvarian[subIndex].price"}})],1),e("q-item-label",[e("money-formatter",{attrs:{"stack-label":"",dense:"",filled:"",required:"",label:"Stok"},model:{value:a.form.varians[i].subvarian[r].stock,callback:function(e){a.$set(a.form.varians[i].subvarian[r],"stock",e)},expression:"form.varians[varIndex].subvarian[subIndex].stock"}})],1)],1)],1)})),1):a._e()],1)])})),0):e("div",[e("div",{staticClass:"row items-start justify-between bg-grey-2 q-pa-md q-pt-lg"},[e("div",{staticClass:"text-weight-bold text-md"},[a._v(a._s(a.form.varians[0].label)+" ")]),e("div",{staticClass:"q-gutter-x-sm"},[e("q-btn",{attrs:{unelevated:"",size:"10px",color:"teal"},on:{click:a.pushVarian}},[a._v("Tambah Item")])],1)]),e("q-list",[e("q-list",{staticClass:"bg-white q-pa-sm q-mt-xs"},a._l(a.form.varians,(function(t,i){return e("q-item",{key:i},[e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{round:"",unelevated:"",padding:"2px",icon:"remove",size:"9px",color:"red"},on:{click:function(e){return a.deleteVarian(i)}}})],1),e("q-item-section",[e("q-input",{attrs:{"stack-label":"",filled:"",square:"",required:"",dense:"",label:a.form.varians[i].label},model:{value:a.form.varians[i].value,callback:function(e){a.$set(a.form.varians[i],"value",e)},expression:"form.varians[vIndex].value"}})],1),e("q-item-section",[e("money-formatter",{attrs:{"stack-label":"",dense:"",filled:"",required:"",prefix:"Rp",label:"Harga Jual"},model:{value:a.form.varians[i].price,callback:function(e){a.$set(a.form.varians[i],"price",e)},expression:"form.varians[vIndex].price"}})],1),e("q-item-section",[e("money-formatter",{attrs:{"stack-label":"",dense:"",filled:"",required:"",label:"Stok"},model:{value:a.form.varians[i].stock,callback:function(e){a.$set(a.form.varians[i],"stock",e)},expression:"form.varians[vIndex].stock"}})],1),e("q-item-section",[e("money-formatter",{attrs:{"stack-label":"",dense:"",filled:"",required:"",label:"Berat"},model:{value:a.form.varians[i].weight,callback:function(e){a.$set(a.form.varians[i],"weight",e)},expression:"form.varians[vIndex].weight"}})],1)],1)})),1)],1)],1)]):a._e()]),e("q-footer",{staticClass:"bg-white q-pa-md"},[e("q-btn",{staticClass:"full-width",attrs:{color:"primary",type:"submit",loading:a.loading,label:"Simpan Data"}},[e("q-tooltip",{staticClass:"bg-accent"},[a._v("Simpan Data")])],1)],1)],1),e("q-dialog",{model:{value:a.varianModal,callback:function(e){a.varianModal=e},expression:"varianModal"}},[e("q-card",{staticClass:"card-medium"},[e("div",{staticClass:"card-heading"},[a._v("Tambah varian")]),e("form",{on:{submit:function(e){return e.preventDefault(),a.addVarianProduk.apply(null,arguments)}}},[e("q-card-section",[e("div",[e("div",{staticClass:"text-md"},[a._v("Varian")]),e("q-input",{attrs:{label:"Label",placeholder:"contoh: Ukuran"},model:{value:a.tempVarian.label,callback:function(e){a.$set(a.tempVarian,"label",e)},expression:"tempVarian.label"}}),e("q-input",{attrs:{label:"Item",placeholder:"contoh: Small, Medium, Large"},model:{value:a.tempVarian.value,callback:function(e){a.$set(a.tempVarian,"value",e)},expression:"tempVarian.value"}}),e("div",{staticClass:"text-grey-7 text-xs q-py-xs"},[a._v("Untuk multiple item, gunakan sparator koma")])],1),a.canToggleSubvarian?e("div",[e("q-checkbox",{attrs:{label:"Subvarian?"},model:{value:a.form.has_subvarian,callback:function(e){a.$set(a.form,"has_subvarian",e)},expression:"form.has_subvarian"}})],1):a._e(),a.mustHaveSubvarian?e("div",{staticClass:"q-mt-md"},[e("div",{staticClass:"text-md"},[a._v("Subvarian")]),e("q-input",{attrs:{label:"Label",placeholder:"contoh: Warna"},model:{value:a.tempSubvarian.label,callback:function(e){a.$set(a.tempSubvarian,"label",e)},expression:"tempSubvarian.label"}}),e("q-input",{attrs:{label:"Item",placeholder:"contoh: Merah, Biru, Ungu"},model:{value:a.tempSubvarian.value,callback:function(e){a.$set(a.tempSubvarian,"value",e)},expression:"tempSubvarian.value"}}),e("div",{staticClass:"text-grey-7 text-xs q-py-xs"},[a._v("Untuk multiple item, gunakan sparator koma")])],1):a._e(),e("div",{staticClass:"flex justify-end q-mt-md q-gutter-sm"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Tutup",flat:"",color:"primary"}}),e("q-btn",{attrs:{unelevated:"",label:"Tambah",type:"submit",color:"primary"}})],1)])],1)])],1)],1)},r=[],s=t("ded3"),n=t.n(s),o=(t("a434"),t("ac1f"),t("1276"),t("159b"),t("2f62")),l={name:"ProductFormCreate",data:function(){return{varianModal:!1,tempVarian:{label:"",value:""},tempSubvarian:{label:"",value:"",stock:"",price:"",items:"",sku:""},requiredRules:[function(a){return a&&a.length>0||"Field harus diisi."}],form:{title:"",price:"",weight:"",stock:"",description:"",category_id:"",varians:[],images:[],sku:"",has_subvarian:!1,featured_index:0},imagePreview:[],variantModalForm:!1}},computed:{errors:function(){return this.$store.state.errors},loading:function(){return this.$store.state.loading},categories:function(){return this.$store.getters["category/getValueOptions"]},canToggleSubvarian:function(){return!this.form.varians.length||!this.form.varians[0].has_subvarian},mustHaveSubvarian:function(){return!(!this.form.varians.length||!this.form.varians[0].has_varian)||!!this.form.has_subvarian},canAddVarian:function(){return!(this.form.varians.length&&!this.form.varians[0].has_subvarian)}},methods:n()(n()(n()(n()({},Object(o["b"])("product",["productStore"])),Object(o["b"])("category",["getCategories"])),Object(o["b"])("customerService",["getCustomerServices"])),{},{onUpdateImage:function(a){this.form.product_images.push(a)},onDeleteImage:function(a){this.form.product_images.splice(a,1)},changeFeaturedImage:function(a){this.form.featured_index=a},onSubmitForm:function(a){this.form.variants=a,this.variantModalForm=!1},deleteVarian:function(a){var e=this;this.$q.dialog({title:"Konfirmasi",message:"Yakin akan menghapus varian",cancel:!0}).onOk((function(){e.form.varians.splice(a,1)}))},deleteSubvarian:function(a,e){this.form.varians[a].subvarian.splice(e,1),this.form.varians[a].subvarian.length||this.form.varians.splice(a,1)},pushSubVarian:function(a){var e,t,i=this.form.varians[a],r={label:i.subvarian[0].label,value:"",stock:0,price:null!==(e=i.price)&&void 0!==e?e:0,weight:null!==(t=i.weight)&&void 0!==t?t:0};this.form.varians[a].subvarian.push(r)},pushVarian:function(){var a,e;this.form.varians.push({has_subvarian:!1,label:this.form.varians[0].label,value:"",stock:0,price:null!==(a=this.form.price)&&void 0!==a?a:0,weight:null!==(e=this.form.weight)&&void 0!==e?e:0})},handleAddVarian:function(){this.varianModal=!0},addVarianProduk:function(){var a,e,t,i=this,r=null!==(a=this.form.price)&&void 0!==a?a:0,s=null!==(e=this.form.weight)&&void 0!==e?e:0,n=null!==(t=this.form.stock)&&void 0!==t?t:0,o=this.tempVarian.value.split(",");this.form.has_subvarian?o.forEach((function(a){var e=null;e={has_subvarian:!0,label:i.tempVarian.label,value:a,subvarian:[]};var t=i.tempSubvarian.value.split(",");t.forEach((function(a){var t={label:i.tempSubvarian.label,value:a,stock:n,price:r,weight:s};e.subvarian.push(t)})),i.form.varians.push(e)})):o.forEach((function(a){var e=null;e={has_subvarian:!1,label:i.tempVarian.label,value:a,stock:n,price:r,weight:s},i.form.varians.push(e)})),this.varianModal=!1,this.tempVarian.value="",this.tempSubvarian.value=""},submit:function(){var a=new FormData;a.append("title",this.form.title),a.append("price",this.form.price),a.append("weight",this.form.weight),a.append("has_subvarian",this.form.has_subvarian),a.append("stock",this.form.stock),a.append("description",this.form.description),a.append("featured_index",this.form.featured_index),this.form.category_id&&a.append("category_id",this.form.category_id),this.form.varians.length>0&&a.append("varians",JSON.stringify(this.form.varians));for(var e=0;e<this.form.images.length;e++){var t=this.form.images[e];a.append("images["+e+"]",t)}this.productStore(a)},selectNewImage:function(){this.$refs.image.click()},updateImagePreview:function(){for(var a=this,e=this.$refs.image.files,t=0;t<e.length;t++){this.form.images.push(e[t]);var i=new FileReader;i.onload=function(e){a.imagePreview.push(e.target.result)},i.readAsDataURL(e[t])}},removeImage:function(a){this.form.featured_index==a&&(0!=a?this.form.featured_index--:this.form.featured_index=0),this.imagePreview.splice(a,1),this.form.images.splice(a,1)}}),mounted:function(){this.getCategories()}},c=l,u=t("2877"),m=t("9989"),d=t("e359"),v=t("65c6"),f=t("9c40"),p=t("6ac5"),b=t("0016"),h=t("27f9"),g=t("ddd8"),x=t("d66b"),q=t("1c1c"),k=t("66e5"),_=t("4074"),w=t("0170"),C=t("7ff0"),y=t("05c0"),S=t("24e8"),I=t("f09f"),V=t("a370"),$=t("8f8e"),Q=t("2eeb"),P=t("7f67"),T=t("eebe"),M=t.n(T),j=Object(u["a"])(c,i,r,!1,null,null,null);e["default"]=j.exports;M()(j,"components",{QPage:m["a"],QHeader:d["a"],QToolbar:v["a"],QBtn:f["a"],QToolbarTitle:p["a"],QIcon:b["a"],QInput:h["a"],QSelect:g["a"],QEditor:x["a"],QList:q["a"],QItem:k["a"],QItemSection:_["a"],QItemLabel:w["a"],QFooter:C["a"],QTooltip:y["a"],QDialog:S["a"],QCard:I["a"],QCardSection:V["a"],QCheckbox:$["a"]}),M()(j,"directives",{GoBack:Q["a"],ClosePopup:P["a"]})}}]);